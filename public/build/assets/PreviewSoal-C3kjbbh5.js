import{r as o,j as e}from"./app-Y8fBfMZs.js";import{E}from"./EndExamModal-Cbg0HxJe.js";import{T as M}from"./Timer-CukPjhTB.js";import{d as I,e as _}from"./index-CAKqQOEl.js";import"./Modal-HlqBTzN1.js";import"./iconBase-DK_xsFNO.js";import"./ownerWindow-1SRb00m4.js";import"./useSlotProps-CAAdliou.js";import"./Box-B0zA7AMO.js";import"./Typography-Bn1kZTH6.js";const J=({paketsoal:x,groupedQuestions:r,tipetestData:h})=>{const[l,f]=o.useState(Object.keys(r)[0]),[i,b]=o.useState(r[l]),[n,c]=o.useState(0),[d,j]=o.useState(Object.keys(r).map(s=>({tipetest:s,answer:Array(r[s].length).fill(null)}))),[w,p]=o.useState(!1),g=async()=>{const s=d.find(t=>t.tipetest===l).answer[n];if(s!=null)try{const t=await axios.post("/api/save-answer",{question_id:i[n].id,answer:s});console.log("Jawaban disimpan",t.data)}catch(t){console.error("Error menyimpan jawaban",t)}},y=async()=>{await g(),n<i.length-1&&c(n+1)},N=()=>{n>0&&c(n-1)},v=s=>{j(t=>t.map(a=>{if(a.tipetest===l){const m=[...a.answer];return m[n]=s,{...a,answer:m}}return a}))},C=()=>{p(!0)},A=()=>{p(!1)},u=()=>{p(!1)},k=s=>{c(s)},S=(s,t)=>{f(s),b(r[s]),c(0)};return o.useEffect(()=>{console.log(d)},[d]),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex w-full absolute h-32 bg-secondary rounded-b-[100px]"}),e.jsxs("div",{className:"max-w-7xl flex m-auto",children:[e.jsxs("div",{className:"relative contsoal flex-1 p-10 rounded-xl shadow-xl bg-white mt-14",children:[e.jsxs("h2",{className:"font-semibold",children:["Soal Nomor ",n+1]}),e.jsx("h5",{className:"soal my-5",dangerouslySetInnerHTML:{__html:i[n].question}}),e.jsxs("div",{className:"pilihan h-auto",children:[e.jsx("ul",{className:"space-y-2",children:i[n].options.map((s,t)=>e.jsxs("li",{className:`h-auto w-full p-2 rounded-lg cursor-pointer flex items-center gap-x-3 ${d.find(a=>a.tipetest===l).answer[n]===s.Alias?"bg-secondary text-white":"bg-blue-gray-200/30"}`,onClick:()=>v(s.Alias),children:[e.jsx("p",{children:`${String.fromCharCode(97+parseInt(s.Alias,10)).toUpperCase()}.`}),e.jsx("p",{dangerouslySetInnerHTML:{__html:s.option}})]},s.Alias))}),e.jsxs("div",{className:"navigasi flex gap-2 mt-20",children:[e.jsx("div",{className:"",children:e.jsxs("button",{onClick:N,disabled:n===0,className:"h-fit w-fit px-3 rounded-md py-2 flex flex-row items-center gap-x-1 bg-green-800/25 text-gray-900",children:[e.jsx(I,{}),"Sebelumnya"]})}),e.jsx("div",{className:"flex",children:e.jsxs("button",{onClick:y,className:"h-fit w-fit px-3 rounded-md py-2 flex flex-row items-center gap-x-1 bg-green-600 text-white",disabled:n===i.length-1,children:[e.jsx("p",{children:"Selanjutnya"}),e.jsx(_,{})]})})]})]})]}),e.jsxs("div",{className:"relative z-30 sisikanan w-autoflex min-w-72 flex-col pt-0 px-4 pb-4 mt-14",children:[e.jsx(M,{initialHours:x.jam,initialMinutes:x.menit,initialSeconds:x.detik,onTimeUp:u}),e.jsx("div",{className:"akhiri py-2 bg-yellow-900 text-white m-2 rounded-full cursor-pointer hover:shadow-md flex items-center justify-center font-bold",children:e.jsx("button",{onClick:C,children:"AKHIRI UJIAN"})}),e.jsx("div",{className:"tipe shadow-xl rounded-2xl bg-white",children:e.jsxs("div",{className:"tes m-4 grid gap-1 py-4",children:[e.jsx("h1",{className:"font-bold",children:"Pilih Tipe tes"}),Object.keys(r).map((s,t)=>e.jsx("button",{className:`twk p-2 ${s===l?"bg-secondary text-white":"bg-blue-gray-200/30 text-gray-900"} text-md flex justify-between items-center  rounded-lg `,onClick:()=>S(s),children:h.find(a=>a.id===parseInt(s,10)).name},t))]})}),e.jsxs("div",{className:"daftar p-4 bg-white rounded-2xl shadow-xl",children:[e.jsx("h1",{className:"font-bold ",children:"Daftar Soal"}),e.jsx("div",{className:"bks grid grid-cols-5 gap-1",children:Array.from({length:i.length},(s,t)=>{const a=d.find(T=>T.tipetest===l),m=a&&a.answer[t]!==null;return e.jsx("button",{className:`number-div p-2 hover:scale-110 ${m?"bg-green-500":"bg-red-500"} text-center rounded-md`,onClick:()=>k(t),children:t+1},t+1)})})]})]}),e.jsx(E,{open:w,onClose:A,onConfirm:u})]})]})};export{J as default};
