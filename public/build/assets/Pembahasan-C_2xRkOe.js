import{r as i,j as e,y as M}from"./app-Y8fBfMZs.js";import{E as O}from"./EndExamModal-Cbg0HxJe.js";import{d as I,e as q}from"./index-CAKqQOEl.js";import"./Modal-HlqBTzN1.js";import"./iconBase-DK_xsFNO.js";import"./ownerWindow-1SRb00m4.js";import"./useSlotProps-CAAdliou.js";import"./Box-B0zA7AMO.js";import"./Typography-Bn1kZTH6.js";const J=({paketsoal:$,groupedQuestions:o,tipetestData:w,percobaanujian:f,groupedAnswers:N})=>{const[d,y]=i.useState("1"),[n,g]=i.useState(o[d]),[t,h]=i.useState(0),[p,G]=i.useState(Object.keys(o).map(s=>{const a=o[s]||[],r=N[s]||[],l=a.map((m,c)=>{const u=r.find(b=>b.question_id===m.id);return{id:m.id,answer:u?u.answer:null}});return{tipetest:s,questions:l}})),[v,j]=i.useState(!1);i.useEffect(()=>{g(o[d]||[])},[d,o]);const C=async()=>{t<n.length-1&&h(t+1)},A=()=>{t>0&&h(t-1)},S=()=>{j(!1)},k=()=>{j(!1),M.post("/endexam",{percobaan_id:f.id,paketsoal_id:f.paketsoal_id})},T=s=>{h(s)},_=(s,a)=>{y(s),g(o[s]),h(0)};i.useEffect(()=>{console.log(p)},[p]),i.useEffect(()=>{console.log("hello")},[t]);const E=()=>{let s;return s=p.filter(a=>a.tipetest===d)[0].questions.filter(a=>a.id===n[t].id)[0].answer,s},x=s=>{const a=Math.max(...s.map(l=>l.nilai));return s.find(l=>l.nilai===a)};return console.log("jwb:",x(n[t].options)),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex w-full absolute h-32 bg-secondary rounded-b-[100px]"}),e.jsxs("div",{className:"max-w-7xl flex m-auto",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"relative contsoal flex-1 p-10 rounded-xl shadow-xl bg-white mt-14",children:[e.jsxs("h2",{className:"font-semibold",children:["Soal Nomor ",t+1]}),e.jsx("h5",{className:"soal my-5",dangerouslySetInnerHTML:{__html:n[t].question}}),e.jsx("div",{className:"pilihan h-auto",children:e.jsx("ul",{className:"space-y-2",children:n[t].options.map((s,a)=>{const r=s.Alias===x(n[t].options).Alias,l=s.Alias===E();return e.jsxs("li",{className:`h-auto w-full p-2 rounded-lg cursor-pointer flex items-center gap-x-3 ${l&&r?"bg-green-700 text-white":l&&!r?"bg-red-700 text-white":r?"bg-green-500 text-white":"bg-blue-gray-200/30 text-black"}`,children:[e.jsx("p",{children:`${String.fromCharCode(97+parseInt(s.Alias,10)).toUpperCase()}.`}),e.jsx("p",{dangerouslySetInnerHTML:{__html:s.option}})]},s.Alias)})})})]}),e.jsxs("div",{className:"relative contsoal flex-1 p-10 rounded-xl shadow-xl bg-white mt-4",children:[e.jsxs("h2",{className:"font-semibold",children:["Pembahasan Soal Nomor ",t+1]}),d==="3"?e.jsxs("table",{children:[e.jsxs("tr",{className:"bg-tertiary/30 rounded-md",children:[e.jsx("th",{className:"p-2 border-2 border-tertiary/30",children:"Opsi"}),e.jsx("th",{className:"p-2 border-2 border-tertiary/30",children:"Nilai"})]}),n[t].options.map((s,a)=>e.jsxs("tr",{className:`${s.Alias===x(n[t].options).Alias?"bg-green-700/40":""}`,children:[e.jsx("td",{className:"text-center border-2 border-secondary/30",children:String.fromCharCode(97+parseInt(s.Alias,10)).toUpperCase()}),e.jsx("td",{className:"text-center border-2 border-secondary/30",children:s.nilai})]}))]}):e.jsx("p",{}),e.jsx("h5",{className:"soal my-5",dangerouslySetInnerHTML:{__html:n[t].pembahasan}}),e.jsx("div",{className:"mt-10",children:e.jsx("span",{className:"px-3 bg-green-600 py-2 rounded-md text-white",children:`Jawaban betul ${String.fromCharCode(97+parseInt(x(n[t].options).Alias,10)).toUpperCase()}`})}),e.jsx("div",{className:"pilihan h-auto",children:e.jsxs("div",{className:"navigasi flex gap-2 mt-20",children:[e.jsx("div",{className:"",children:e.jsxs("button",{onClick:A,disabled:t===0,className:"h-fit w-fit px-3 rounded-md py-2 flex flex-row items-center gap-x-1 bg-green-800/25 text-gray-900",children:[e.jsx(I,{}),"Sebelumnya"]})}),e.jsx("div",{className:"flex",children:e.jsxs("button",{onClick:C,className:"h-fit w-fit px-3 rounded-md py-2 flex flex-row items-center gap-x-1 bg-green-600 text-white",disabled:t===n.length-1,children:[e.jsx("p",{children:"Selanjutnya"}),e.jsx(q,{})]})})]})})]})]}),e.jsxs("div",{className:"relative z-30 sisikanan w-autoflex min-w-72 flex-col pt-0 px-4 pb-4 mt-14",children:[e.jsx("div",{className:"tipe shadow-xl rounded-2xl bg-white",children:e.jsxs("div",{className:"tes m-4 grid gap-1 py-4",children:[e.jsx("h1",{className:"font-bold",children:"Pilih Tipe tes"}),Object.keys(o).map((s,a)=>e.jsx("button",{className:`twk p-2 ${s===d?"bg-secondary text-white":"bg-blue-gray-200/30 text-gray-900"} text-md flex justify-between items-center  rounded-lg `,onClick:()=>_(s),children:w.find(r=>r.id===parseInt(s,10)).name},a))]})}),e.jsxs("div",{className:"daftar p-4 bg-white rounded-2xl shadow-xl",children:[e.jsx("h1",{className:"font-bold ",children:"Daftar Soal"}),e.jsx("div",{className:"bks grid grid-cols-5 gap-1",children:Array.from({length:n.length},(s,a)=>{const r=p.find(c=>c.tipetest===d),m=(()=>{if(!r)return"unanswered";const c=r.questions.find(b=>b.id===n[a].id);if(!c||c.answer===null)return"unanswered";const u=x(n[a].options).Alias;return c.answer===u?"correct":"incorrect"})();return e.jsx("button",{className:`number-div p-2 hover:scale-105 ${m==="correct"?"bg-green-500":m==="incorrect"?"bg-red-500":"bg-gray-300"} text-center rounded-md`,onClick:()=>T(a),children:a+1},a+1)})})]})]}),e.jsx(O,{open:v,onClose:S,onConfirm:k})]})]})};export{J as default};
